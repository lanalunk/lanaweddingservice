<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Order Vendor Wedding</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
<style>
  * {margin:0; padding:0; box-sizing:border-box; font-family:'Poppins', sans-serif;}
  body {background:#fff0f5; color:#333;}
  header {background:#ffdee9; padding:25px; text-align:center; box-shadow:0 4px 8px rgba(0,0,0,0.1);}
  header h1 {color:#d6336c; font-size:26px;}
  .container {width:90%; max-width:900px; margin:20px auto;}
  .vendor-item {background:#fff; border-radius:15px; padding:15px; margin-bottom:15px; box-shadow:0 2px 12px rgba(0,0,0,0.1);}
  .vendor-item h3 {color:#d6336c; margin-bottom:5px;}
  .vendor-item p {font-size:14px; margin-bottom:5px;}
  .vendor-item select, .vendor-item input {padding:6px 8px; margin-right:10px; border-radius:5px; border:1px solid #ccc;}
  .total {font-size:18px; font-weight:600; margin-top:20px; text-align:right; color:#d6336c;}
  #sendWA {width:100%; margin-top:20px; padding:12px; background:#d6336c; color:#fff; border:none; border-radius:10px; font-size:18px; cursor:pointer; transition:0.3s;}
  #sendWA:hover {background:#b61a4b;}
  @media(max-width:600px){
    .vendor-item {padding:12px;}
    .vendor-item select, .vendor-item input {margin-bottom:8px; width:100%;}
    .total {text-align:left;}
  }
</style>
</head>
<body>

<header>
  <h1>Form Order Vendor</h1>
</header>

<div class="container" id="vendorContainer"></div>

<div class="total" id="totalPrice">Total: Rp0</div>
<button id="sendWA">Kirim ke WhatsApp</button>

<script>
const selectedVendors = JSON.parse(localStorage.getItem('selectedVendors') || '[]');
const allVendors = [
  {name:"Vendor WO A", category:"WO", location:"Jakarta", packages:["Bronze Rp5.000.000","Silver Rp7.500.000","Gold Rp10.000.000"], image:"", whatsapp:"6285727754442"},
  {name:"Vendor WO B", category:"WO", location:"Bandung", packages:["Silver Rp6.000.000","Gold Rp9.000.000"], image:"", whatsapp:"6285727754442"},
  {name:"MUA B", category:"MUA", location:"Bandung", packages:["Basic Rp1.500.000","Premium Rp2.500.000"], image:"", whatsapp:"6285727754442"},
  {name:"MUA C", category:"MUA", location:"Jakarta", packages:["Silver Rp3.000.000","Gold Rp5.000.000"], image:"", whatsapp:"6285727754442"},
  {name:"Catering C", category:"Catering", location:"Surabaya", packages:["Paket A Rp3.000.000","Paket B Rp5.000.000"], image:"", whatsapp:"6285727754442"},
  {name:"Dekorasi D", category:"Dekorasi", location:"Yogyakarta", packages:["Silver Rp4.000.000","Gold Rp6.500.000"], image:"", whatsapp:"6285727754442"},
];

const vendorContainer = document.getElementById('vendorContainer');
const totalPriceEl = document.getElementById('totalPrice');

function formatPrice(str){
  return parseInt(str.replace(/\D/g,''));
}

function formatRupiah(num){
  return 'Rp' + num.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".");
}

// Render vendor form
selectedVendors.forEach(vName=>{
  const vendor = allVendors.find(v=>v.name===vName);
  if(!vendor) return;
  const div = document.createElement('div');
  div.className='vendor-item';
  div.innerHTML=`
    <h3>${vendor.name}</h3>
    <p>Lokasi: ${vendor.location}</p>
    <label>Pilih Paket:</label>
    <select class="packageSelect">
      ${vendor.packages.map(p=>`<option value="${formatPrice(p)}">${p}</option>`).join('')}
    </select>
    <label>Jumlah:</label>
    <input type="number" class="qtyInput" value="1" min="1">
  `;
  vendorContainer.appendChild(div);
});

// Hitung total
function calculateTotal(){
  let total = 0;
  const items = document.querySelectorAll('.vendor-item');
  items.forEach(item=>{
    const price = parseInt(item.querySelector('.packageSelect').value);
    const qty = parseInt(item.querySelector('.qtyInput').value);
    total += price * qty;
  });
  totalPriceEl.textContent = 'Total: ' + formatRupiah(total);
}

// Event listener
vendorContainer.addEventListener('change', calculateTotal);

// Kirim ke WA
document.getElementById('sendWA').addEventListener('click', ()=>{
  let message = 'Order Vendor Wedding:%0A';
  const items = document.querySelectorAll('.vendor-item');
  items.forEach(item=>{
    const name = item.querySelector('h3').textContent;
    const packageText = item.querySelector('.packageSelect').selectedOptions[0].textContent;
    const qty = item.querySelector('.qtyInput').value;
    message += `${name} - ${packageText} x${qty}%0A`;
  });
  message += totalPriceEl.textContent.replace('Total: ','%0ATotal: ');
  const waNumber = '6285727754442';
  window.open(`https://wa.me/${waNumber}?text=${message}`, '_blank');
});

// Initial total
calculateTotal();
</script>

</body>
</html>
